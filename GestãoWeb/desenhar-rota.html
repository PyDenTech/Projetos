<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mapa de Localização</title>
  <style>
    #map {
      height: 500px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>Mapa de Localização em Tempo Real</h1>
  <div id="map"></div>

  <script>
    // Carregar o mapa
    function initMap() {
      // Coordenadas iniciais (pode ser uma posição padrão)
      const initialLocation = { lat: -15.7801, lng: -47.9292 };

      // Criar o mapa
      const map = new google.maps.Map(document.getElementById('map'), {
        zoom: 14,
        center: initialLocation,
      });

      // Carregar as coordenadas do servidor
      fetch('/localizacoes')
        .then(response => response.json())
        .then(data => {
          data.forEach(location => {
            const marker = new google.maps.Marker({
              position: { lat: location.latitude, lng: location.longitude },
              map: map,
            });
          });
        })
        .catch(error => console.error('Erro ao carregar dados: ', error));
    }
  </script>

  <!-- Google Maps API -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCAwvAt4l0Pkb1c52FLUE-ttVxm4YZ9J8M&callback=initMap">
  </script>
</body>
</html>
